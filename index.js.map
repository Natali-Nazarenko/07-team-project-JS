{"version":3,"file":"index.js","sources":["../src/js/feedback/library-feedback.js","../src/js/error-handler.js","../src/js/feedback/feedback-api.js","../src/js/feedback/feedback.js","../src/js/mobile-menu.js","../src/js/ui-helpers.js"],"sourcesContent":["import Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport 'css-star-rating/css/star-rating.min.css';\n\nfunction fillStars() {\n  const FILL_COLOR = '#764191';\n  const NORM_COLOR = '#FFFFFF';\n  const starRating = document.querySelectorAll('.star-rating');\n\n  starRating.forEach(ratingEl => {\n    const rating = Number(ratingEl.dataset.rating) || 0;\n    const stars = ratingEl.querySelectorAll('.star-rating__star');\n    stars.forEach((star, i) => {\n      star.style.backgroundColor = i < rating ? FILL_COLOR : NORM_COLOR;\n    });\n  });\n}\n\nexport function startSwiper() {\n  new Swiper('.feedback-swiper', option);\n}\n\nconst option = {\n  modules: [Navigation, Pagination],\n  loop: false,\n  slidesPerView: 1,\n  spaceBetween: 20,\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n    bulletClass: 'custom-bullet',\n    bulletActiveClass: 'custom-bullet-active',\n    renderBullet(index, className) {\n      if (index > 2) return '';\n      return `<span class=\"${className}\"></span>`;\n    },\n  },\n  on: {\n    init() {\n      updatePagination(this);\n      fillStars();\n    },\n    slideChange() {\n      updatePagination(this);\n    },\n  },\n};\n\nfunction updatePagination(elem) {\n  const total = elem.slides.length;\n  const currentIndex = elem.activeIndex;\n  const bullets = document.querySelectorAll('.custom-bullet');\n  if (!bullets.length || total === 0) return;\n  let currentGroup;\n  if (currentIndex === 0) {\n    currentGroup = 0;\n  } else if (currentIndex === total - 1) {\n    currentGroup = 2;\n  } else {\n    currentGroup = 1;\n  }\n\n  bullets.forEach((bullet, index) =>\n    bullet.classList.toggle('custom-bullet-active', index === currentGroup)\n  );\n}\n","//обробники помилок при запитах на сервер\nimport iziToast from \"izitoast\";\n\nconst errorText = {\n    endLoad: {\n        title: '!',\n        message: `We're sorry, but you've reached the end of search results.` //коли закінчилися artists\n    },\n    network: {\n        title: 'WARNING!',\n        message: ''             //повідомлення від сервера\n    }\n}\n\n//сповіщення красне для повідомлень від сервера\n\nexport function validInput({ title, message}) {\n        iziToast.show({\n            title,\n            titleColor: 'red',\n            message,\n            position: 'topCenter',\n            messageColor: 'black',\n            color: 'red',\n    });\n}\n\n//сповіщення сині для повідомлень про кінеці галереї\n\nexport function infoMessage({ title, message }) {\n    iziToast.show({\n            title,\n            titleColor: 'blue',\n            message,\n            position: 'topCenter',\n            messageColor: 'blue',\n            color: 'blue',\n    });\n}\n\n// приклад обробки помилки\n//      }catch (error) {\n//        errorText.network.message = error.message;\n//        validInput(errorText.network);\n//      }finally {\n//        hideLoader(); \n//      }","import axios from 'axios';\nimport { validInput } from '../error-handler';\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\nconst END_POINT = '/feedbacks';\nconst url = `${BASE_URL}${END_POINT}`;\nconst option = { params: { limit: 10 } };\n\nexport async function fetchFeedbacks() {\n  try {\n    const {\n      data: { data: feedbacks },\n    } = await axios.get(url, option);\n    return Array.isArray(feedbacks) ? feedbacks : [];\n  } catch (error) {\n    validInput(error.message);\n    return [];\n  }\n}\n","import { startSwiper } from './library-feedback';\nimport { fetchFeedbacks } from './feedback-api';\n\nconst listElem = document.querySelector('#feedback-list');\n\nasync function initFeedback() {\n  if (!listElem) return;\n  const feedbacks = await fetchFeedbacks();\n  if (!Array.isArray(feedbacks) || feedbacks.length === 0) return;\n  listElem.innerHTML = feedbacks\n    .map(\n      feedback =>\n        `<div class=\"swiper-slide\">${createFeedbackMarkup(feedback)}</div>`\n    )\n    .join('');\n\n  startSwiper();\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  initFeedback();\n});\n\n// тимчасовий рендер=============================================\nfunction createFeedbackMarkup({ rating, descr, name }) {\n  const ratingRound = Math.round(rating);\n\n  return `\n    <div class=\"feedback-card\">\n      <div class=\"star-rating star-rating--sm\" data-rating=\"${ratingRound}\">\n        ${'<span class=\"star-rating__star\"></span>'.repeat(5)}\n      </div>\n      <p class=\"feedback-text\">${descr}</p>\n      <p class=\"feedback-author\">${name}</p>\n    </div>\n  `;\n}\n","const menu = document.querySelector('[data-menu]');\nconst openBtn = document.querySelector('[data-menu-open]');\nconst closeBtn = document.querySelector('[data-menu-close]');\nconst mobMenuLink = document.querySelectorAll('[data-mob-nav]');\n\nconst toggleMenu = () => {\n  menu.classList.toggle('visually-hidden');\n};\n\nconst openMenu = () => {\n  toggleMenu();\n  document.body.classList.add('no-scroll');\n};\n\nconst closeMenu = () => {\n  toggleMenu();\n  document.body.classList.remove('no-scroll');\n};\n\nopenBtn.addEventListener('click', toggleMenu);\ncloseBtn.addEventListener('click', closeMenu);\n\nmobMenuLink.forEach(link => {\n  link.addEventListener('click', () => {\n    closeMenu();\n  });\n});\n\ndocument.addEventListener('keydown', esc => {\n  if (esc.key === 'Escape' && !menu.classList.contains('visually-hidden')) {\n    closeMenu();\n  }\n});\n","//функції, відповідальні за логіку show/hide loader, show/hide loadMoreButton\n\nexport const btnLoad = document.querySelector('.btn-load-more');\nconst loader = document.querySelector('.loader');\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() { \n    btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    btnLoad.classList.add('hidden');\n}\n"],"names":["fillStars","FILL_COLOR","NORM_COLOR","ratingEl","rating","star","i","startSwiper","Swiper","option","Navigation","Pagination","index","className","updatePagination","elem","total","currentIndex","bullets","currentGroup","bullet","validInput","title","message","iziToast","BASE_URL","END_POINT","url","fetchFeedbacks","feedbacks","axios","error","listElem","initFeedback","feedback","createFeedbackMarkup","descr","name","menu","openBtn","closeBtn","mobMenuLink","toggleMenu","closeMenu","link","esc"],"mappings":"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"}