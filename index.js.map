{"version":3,"file":"index.js","sources":["../src/js/sound-wave-api.js","../src/js/artists/render-artists.js","../src/js/error-handler.js","../src/js/ui-helpers.js","../src/js/artists/main-artists.js","../src/js/feedback/library-feedback.js","../src/js/feedback/feedback.js","../src/js/mobile-menu.js"],"sourcesContent":["//запроси до БД\nimport axios from 'axios';\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\n\nexport async function getArtists(page) {\n  const { data } = await axios.get(`${BASE_URL}/artists`, {\n    params: {\n      page,\n      limit: 8,\n    },\n  });\n  return data;\n}\n\nexport async function getArtistInfo(id) {\n  const { data } = await axios.get(`${BASE_URL}/artists/${id}`);\n  return data;\n}\n\nexport async function getArtistAlbums(id) {\n  const { data } = await axios.get(`${BASE_URL}/artists/${id}/albums`);\n  return data;\n}\n\nexport async function fetchFeedbacks() {\n  const {\n    data: { data: feedbacks },\n  } = await axios.get(`${BASE_URL}/feedbacks`, {\n    params: {\n      limit: 10,\n    },\n  });\n  return Array.isArray(feedbacks) ? feedbacks : [];\n}\n","const gallery = document.querySelector('.art-gallery');\n\nexport function renderArtistsGallery(data) {\n    const markup = data.map(({ genres, strArtist, strBiographyEN, strArtistThumb }) => `\n        <li class='artist-card'>\n            <img class='art-photo' src=\"${strArtistThumb}\"\n            alt=\"${strArtist}\"\n            width=\"640\" height=\"393\">\n            <ul class=\"genres-list\">\n                ${genres.map(genre => `<li class=\"genre\">${genre}</li>`).join('')}\n            </ul>\n            <h3 class='artist-name'>${strArtist}</h3>\n            <p class='artist-bio'>${strBiographyEN}</p>\n            <button class='learn-more-btn' type=\"button\"><span class='btn-text'>Learn More</span>\n            <svg class=\"right-triangle\" width=\"24\" height=\"24\">\n            <use href=\"../img/sprite-white.svg#right-triangle-full\"></use>\n            </svg>\n            </button>\n        </li>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n}","//обробники помилок при запитах на сервер\nimport iziToast from \"izitoast\";\n\nconst errorText = {\n    endLoad: {\n        title: '!',\n        message: `We're sorry, but you've reached the end of search results.` //коли закінчилися artists\n    },\n    network: {\n        title: 'WARNING!',\n        message: ''             //повідомлення від сервера\n    }\n}\n\n//сповіщення красне для повідомлень від сервера\n\nexport function validInput({ title, message}) {\n        iziToast.show({\n            title,\n            titleColor: 'red',\n            message,\n            position: 'topCenter',\n            messageColor: 'black',\n            color: 'red',\n    });\n}\n\n//сповіщення сині для повідомлень про кінеці галереї\n\nexport function infoMessage({ title, message }) {\n    iziToast.show({\n            title,\n            titleColor: 'blue',\n            message,\n            position: 'topCenter',\n            messageColor: 'blue',\n            color: 'blue',\n    });\n}\n\n// приклад обробки помилки\n//      }catch (error) {\n//        errorText.network.message = error.message;\n//        validInput(errorText.network);\n//      }finally {\n//        hideLoader(); \n//      }","//функції, відповідальні за логіку show/hide loader, show/hide loadMoreButton\n\nexport const btnLoad = document.querySelector('.btn-load-more');\nconst loader = document.querySelector('.loader');\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() { \n    btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    btnLoad.classList.add('hidden');\n}\n","import { getArtists } from \"../sound-wave-api\";\nimport { renderArtistsGallery } from \"./render-artists\";\nimport { validInput, infoMessage } from \"../error-handler\"\nimport { showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"../ui-helpers\"\n\nlet page = 1;\nconst perPage = 8;\n\nasync function initArtists() {\n    try {\n        showLoader();\n        const data = await getArtists(page);\n\n        if (data.artists.length === 0) {\n            validInput({ title: 'Помилка', message: 'Не вдалося завантажити дані' });\n        }\n\n        renderArtistsGallery(data.artists);\n        showLoadMoreButton();\n\n    } catch (error) {\n        validInput({ title: 'Помилка', message: 'Не вдалося завантажити дані' });\n    } finally {\n        hideLoader();\n    }\n}\n\ninitArtists();\n\nconst fetchCardsBtn = document.querySelector('.btn-load-more');\nfetchCardsBtn.addEventListener('click', handleClick);\nasync function handleClick() {\n    hideLoadMoreButton();\n    showLoader();\n    page += 1;\n    try {\n        const newData = await getArtists(page);\n        renderArtistsGallery(newData.artists);\n        \n        const card = document.querySelector('.artist-card');\n        const { height } = card.getBoundingClientRect();\n        window.scrollBy({\n            top: height,\n            behavior: 'smooth',\n        });\n\n        if (page * perPage >= newData.totalArtists) {\n            hideLoadMoreButton();\n            infoMessage({ title: 'Кінець колекції', message: 'Ви досягнули кінця колекції' });\n            return;\n        }\n        showLoadMoreButton();\n    } catch (error) {\n        validInput({ title: 'Помилка', message: 'Не вдалося завантажити дані'});\n    }finally {\n        hideLoader();\n    }\n}\n\n","import Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport 'css-star-rating/css/star-rating.min.css';\n\nfunction fillStars() {\n  const FILL_COLOR = '#764191';\n  const NORM_COLOR = '#FFFFFF';\n  const starRating = document.querySelectorAll('.star-rating');\n\n  starRating.forEach(ratingEl => {\n    const rating = Number(ratingEl.dataset.rating) || 0;\n    const stars = ratingEl.querySelectorAll('.star-rating__star');\n    stars.forEach((star, i) => {\n      star.style.backgroundColor = i < rating ? FILL_COLOR : NORM_COLOR;\n    });\n  });\n}\n\nexport function startSwiper() {\n  new Swiper('.feedback-swiper', option);\n}\n\nconst option = {\n  modules: [Navigation, Pagination],\n  loop: false,\n  slidesPerView: 1,\n  spaceBetween: 20,\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n    bulletClass: 'custom-bullet',\n    bulletActiveClass: 'custom-bullet-active',\n    renderBullet(index, className) {\n      if (index > 2) return '';\n      return `<span class=\"${className}\"></span>`;\n    },\n  },\n  on: {\n    init() {\n      updatePagination(this);\n      fillStars();\n    },\n    slideChange() {\n      updatePagination(this);\n    },\n  },\n};\n\nfunction updatePagination(elem) {\n  const total = elem.slides.length;\n  const currentIndex = elem.activeIndex;\n  const bullets = document.querySelectorAll('.custom-bullet');\n  if (!bullets.length || total === 0) return;\n  let currentGroup;\n  if (currentIndex === 0) {\n    currentGroup = 0;\n  } else if (currentIndex === total - 1) {\n    currentGroup = 2;\n  } else {\n    currentGroup = 1;\n  }\n\n  bullets.forEach((bullet, index) =>\n    bullet.classList.toggle('custom-bullet-active', index === currentGroup)\n  );\n}\n","import { startSwiper } from './library-feedback';\nimport { fetchFeedbacks } from '../sound-wave-api';\n\nconst listElem = document.querySelector('#feedback-list');\n\nasync function initFeedback() {\n  if (!listElem) return;\n  const feedbacks = await fetchFeedbacks();\n  if (!Array.isArray(feedbacks) || feedbacks.length === 0) return;\n  listElem.innerHTML = feedbacks\n    .map(\n      feedback =>\n        `<div class=\"swiper-slide\">${createFeedbackMarkup(feedback)}</div>`\n    )\n    .join('');\n\n  startSwiper();\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  initFeedback();\n});\n\n// тимчасовий рендер=============================================\nfunction createFeedbackMarkup({ rating, descr, name }) {\n  const ratingRound = Math.round(rating);\n\n  return `\n    <div class=\"feedback-card\">\n      <div class=\"star-rating star-rating--sm\" data-rating=\"${ratingRound}\">\n        ${'<span class=\"star-rating__star\"></span>'.repeat(5)}\n      </div>\n      <p class=\"feedback-text\">${descr}</p>\n      <p class=\"feedback-author\">${name}</p>\n    </div>\n  `;\n}\n","const menu = document.querySelector('[data-menu]');\nconst openBtn = document.querySelector('[data-menu-open]');\nconst closeBtn = document.querySelector('[data-menu-close]');\nconst mobMenuLink = document.querySelectorAll('[data-mob-nav]');\n\nconst openMenu = () => {\n  menu.classList.remove('is-hidden');\n  document.body.classList.add('no-scroll');\n};\n\nconst closeMenu = () => {\n  menu.classList.add('is-hidden');\n  document.body.classList.remove('no-scroll');\n};\n\nopenBtn.addEventListener('click', openMenu);\ncloseBtn.addEventListener('click', closeMenu);\n\nmobMenuLink.forEach(link => {\n  link.addEventListener('click', () => {\n    closeMenu();\n  });\n});\n\ndocument.addEventListener('keydown', esc => {\n  if (esc.key === 'Escape' && !menu.classList.contains('is-hidden')) {\n    closeMenu();\n  }\n});\n"],"names":["BASE_URL","getArtists","page","data","axios","fetchFeedbacks","feedbacks","gallery","renderArtistsGallery","markup","genres","strArtist","strBiographyEN","strArtistThumb","genre","validInput","title","message","iziToast","infoMessage","btnLoad","loader","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","perPage","initArtists","fetchCardsBtn","handleClick","newData","card","height","fillStars","FILL_COLOR","NORM_COLOR","ratingEl","rating","star","i","startSwiper","Swiper","option","Navigation","Pagination","index","className","updatePagination","elem","total","currentIndex","bullets","currentGroup","bullet","listElem","initFeedback","feedback","createFeedbackMarkup","descr","name","menu","openBtn","closeBtn","mobMenuLink","openMenu","closeMenu","link","esc"],"mappings":"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"}